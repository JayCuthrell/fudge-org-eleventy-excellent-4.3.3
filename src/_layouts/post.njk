---
layout: base
schema: BlogPosting
---

<div class="region" style="--region-space-top: var(--space-xl-2xl)">
  <div class="wrapper flow prose">
    <h1 class="gradient-text-none">{{ title }}</h1>
    <h2 class="gradient-text-none">{{ description }}</h2>
    {% if image %}
      <!-- image -->
      {% image image, alt or "", credit, "eager", "feature" %}
    {% endif %}

    <p class="meta | cluster gutter-xs-s">
      <!-- draft status -->
      {%- if draft -%}
        <span class="button" data-small-button data-button-variant="tertiary">draft</span>
      {%- endif %}
      <!-- date -->
      {% set definedDate = date %} {% include "partials/date.njk" %}
      {%
        if tags.length >
        1
      %}
        <!-- tags -->
        {% for tag in tags %}{% if tag != "posts" %}
          <a class="button" href="/tags/{{ tag | slugify }}/" data-small-button> {{ tag }} </a>
        {% endif %}{% endfor %}
      {% endif %}
    </p>

    {{ content | safe }}

  <hr class="divider" />
    <nav class="pagination" aria-label="Post navigation">
      <ul class="cluster" role="list">
        {%- set previousPost = collections.allPosts | getPreviousCollectionItem(page) -%}
        {%- set nextPost = collections.allPosts | getNextCollectionItem(page) -%}
        
        {%- if previousPost -%}
          <li>
            <span>Previous:</span>
            <a href="{{ previousPost.url }}" rel="prev">{{ previousPost.data.title }}</a>
          </li>
        {%- endif -%}
        
        {%- if nextPost -%}
          <li>
            <span>Next:</span>
            <a href="{{ nextPost.url }}" rel="next">{{ nextPost.data.title }}</a>
          </li>
        {%- endif -%}
      </ul>
    </nav>

    {% include 'partials/edit-on.njk' %}

  {% set relatedPosts = [] %}
    {% for post in collections.allPosts %}
      {% if post.url != page.url %}
        {% set match = false %}
        {% for tag in post.data.tags %}
          {% if tags.includes(tag) and tag != "posts" %}
            {% set match = true %}
          {% endif %}
        {% endfor %}
        {% if match %}
          {% set relatedPosts = (relatedPosts.push(post), relatedPosts) %}
        {% endif %}
      {% endif %}
    {% endfor %}

    {% if relatedPosts.length > 0 %}
      <div class="prose flow margin-top-l-xl">
        <h2>Related Reading</h2>
        <ul>
        {% for related in relatedPosts.slice(0, 3) %}
          <li><a href="{{ related.url }}">{{ related.data.title }}</a></li>
        {% endfor %}
        </ul>
      </div>
    {% endif %}

    {% include 'partials/subscribe.njk' %}
  </div>

  <!--  h-card infos: https://indieweb.org/authorship -->
  <div hidden class="h-entry">
    <a class="u-url" href="{{ page.url | url | absoluteUrl(meta.url) }}">{{ title }}</a>
    <a class="p-name u-url" rel="author" href="{{ meta.url }}">{{ meta.author.name }}</a>
    <img
      eleventy:ignore
      class="u-author h-card"
      src="{{ meta.author.avatar | url | absoluteUrl(meta.url) }}"
      alt="{{ meta.author.name }}"
    />
  </div>
</div>

{%- css "local" -%}
  {%- include 'css/post.css' -%}
  {%- include 'css/forms.css' -%}
  {%- include 'css/footnotes.css' -%}
{%- endcss -%}
